---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ServiceCard from "../../components/cards/ServiceCard.astro";
import { getServices } from "../../data/services";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const services = getServices(lang as any);

const title = "Our Services - Padang Eye Center";
const description =
  "Solusi kesehatan mata komprehensif dengan teknologi terkini";
const permalink = `${Astro.site?.href}layanan`;
---

<BaseLayout
  title={title}
  description={description}
  permalink={permalink}
  current="services">
  <div class="services-page-wrapper relative overflow-hidden">
    <!-- Decorative Background Elements -->
    <div
      class="decorative-blob decorative-blob-orange absolute top-0 left-0 w-[500px] h-[500px] rounded-full blur-3xl opacity-20 animate-pulse pointer-events-none">
    </div>
    <div
      class="decorative-blob decorative-blob-green absolute bottom-0 right-0 w-[600px] h-[600px] rounded-full blur-3xl opacity-20 animate-pulse pointer-events-none">
    </div>

    <div class="max-w-7xl mx-auto px-4 py-12 md:py-20 relative z-10">
      <!-- Page Header -->
      <div class="text-center mb-12 md:mb-20">
        <div class="flex items-center justify-center gap-3 mb-6">
          <div class="header-line h-[2px] w-16 md:w-20 rounded-full"></div>
          <span
            class="header-badge text-xs font-bold uppercase tracking-[0.3em]">
            {t("services.badge") || "Our Services"}
          </span>
          <div class="header-line h-[2px] w-16 md:w-20 rounded-full"></div>
        </div>
      </div>

      <!-- Services Grid -->
      <div class="services-grid-wrapper mb-12 md:mb-20">
        <div
          class="services-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-0">
          {
            services.map((service) => (
              <div class="service-card-wrapper">
                <ServiceCard {...service} />
              </div>
            ))
          }
        </div>
      </div>

      <!-- Bottom CTA Section -->
      <div class="text-center">
        <div
          class="bottom-cta-card max-w-4xl mx-auto rounded-3xl border backdrop-blur-xl p-6 md:p-10 lg:p-12 relative overflow-hidden">
          <div class="cta-pattern absolute inset-0 opacity-[0.02]">
            <div
              class="absolute inset-0"
              style="background-image: radial-gradient(circle at 2px 2px, currentColor 1px, transparent 0); background-size: 24px 24px;">
            </div>
          </div>

          <div class="relative z-10">
            <h2
              class="bottom-cta-title text-2xl md:text-4xl lg:text-5xl font-black tracking-tighter uppercase mb-3 md:mb-4">
              Butuh Konsultasi?
            </h2>
            <p class="bottom-cta-text text-base md:text-lg mb-6 md:mb-8">
              Tim kami siap membantu Anda menemukan solusi terbaik untuk
              kesehatan mata Anda
            </p>
            <a href="/kontak" class="btn-primary-pec inline-flex">
              Hubungi Kami
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24">
                <path
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  /* Decorative Blobs */
  .decorative-blob-orange {
    background: radial-gradient(circle, rgba(234, 88, 12, 0.3), transparent);
    animation-delay: 0s;
  }

  .decorative-blob-green {
    background: radial-gradient(circle, rgba(22, 163, 74, 0.3), transparent);
    animation-delay: 1.5s;
  }

  :root.theme-dark .decorative-blob-orange,
  :root.theme-dark .decorative-blob-green {
    opacity: 0.15;
  }

  /* Mobile optimization for blobs */
  @media (max-width: 768px) {
    .decorative-blob-orange {
      width: 300px;
      height: 300px;
      top: -50px;
      left: -50px;
    }

    .decorative-blob-green {
      width: 350px;
      height: 350px;
      bottom: -50px;
      right: -50px;
    }
  }

  /* Header Styling */
  .header-line {
    background: linear-gradient(
      to right,
      var(--text-primary),
      var(--text-secondary)
    );
  }

  .header-badge {
    color: var(--text-muted);
  }

  .page-title .title-main {
    color: var(--text-main);
  }

  .page-title .title-gradient {
    background: linear-gradient(
      to right,
      var(--text-primary),
      var(--text-secondary)
    );
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .page-subtitle {
    color: var(--text-muted);
    font-weight: 500;
  }

  /* Services Grid - Adjusted for ServiceCard component */
  .services-grid-wrapper {
    perspective: 1000px;
    width: 100%;
    overflow: hidden;
  }

  .services-grid {
    width: 100%;
    max-width: 100%;
  }

  .service-card-wrapper {
    display: flex;
    justify-content: center;
    align-items: stretch;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
  }

  /* Override ServiceCard default width for grid layout */
  .service-card-wrapper :global(.inline-block) {
    width: 100% !important;
    max-width: 100% !important;
    display: block !important;
  }

  .service-card-wrapper :global(.service-card) {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Bottom CTA Card */
  .bottom-cta-card {
    background-color: var(--background-body);
    border-color: rgba(0, 0, 0, 0.08);
  }

  :root.theme-dark .bottom-cta-card {
    border-color: rgba(255, 255, 255, 0.1);
  }

  .cta-pattern {
    color: var(--text-main);
  }

  .bottom-cta-title {
    color: var(--text-main);
  }

  .bottom-cta-text {
    color: var(--text-muted);
  }

  /* Animations */
  @keyframes pulse {
    0%,
    100% {
      opacity: 0.15;
    }
    50% {
      opacity: 0.25;
    }
  }

  /* Responsive Grid Adjustments */
  @media (max-width: 1280px) {
    .services-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 1024px) {
    .services-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .services-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Ensure cards fill the grid cells properly */
  .services-grid > * {
    min-height: 100%;
  }
</style>
